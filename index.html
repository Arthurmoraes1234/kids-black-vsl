// ================================
// üîß C√ìDIGO OTIMIZADO - EXEMPLOS PR√ÅTICOS
// ================================

// 1. COMPONENTE DE IMAGEM OTIMIZADO
const OptimizedImage = ({ src, alt, className = "", ...props }) => {
  const [loaded, setLoaded] = useState(false);
  const [imgSrc, setImgSrc] = useState(null);

  useEffect(() => {
    // Debounce para evitar carregamento imediato
    const timer = setTimeout(() => {
      setImgSrc(src);
    }, 50);
    
    return () => clearTimeout(timer);
  }, [src]);

  return (
    <div className="relative overflow-hidden">
      {!loaded && (
        <div className={`absolute inset-0 bg-gradient-to-br from-gray-200 to-gray-300 animate-pulse ${className}`} />
      )}
      <img
        src={imgSrc}
        alt={alt}
        onLoad={() => setLoaded(true)}
        loading="lazy"
        className={`transition-opacity duration-300 ${loaded ? 'opacity-100' : 'opacity-0'} ${className}`}
        {...props}
      />
    </div>
  );
};

// 2. LOGO OTIMIZADO (usando o seu c√≥digo)
const OptimizedLogo = () => (
  <OptimizedImage
    src="https://i.imgurl.com/bl6Amwcp.png"
    alt="Aventurinhas Logo"
    className="h-28 md:h-36 max-w-none hover:scale-105 transition-transform drop-shadow-lg"
  />
);

// 3. IMAGEM DE DESTAQUE OTIMIZADA
const OptimizedHighlightImage = () => (
  <OptimizedImage
    src="https://i.imgurl.com/MZrBRnD.png"
    alt="Destacados Aventurinhas"
    className="w-full h-auto object-cover rounded-t-3xl"
  />
);

// 4. V√çDEO OTIMIZADO COM CARREGAMENTO TARDIO
const OptimizedVideo = ({ ref: refProp, src, autoPlay = true, muted = true, loop = true, playsInline = true, className = "", ...props }) => {
  const [shouldLoad, setShouldLoad] = useState(false);
  const videoRef = useRef(null);

  useEffect(() => {
    // Carrega o v√≠deo apenas quando necess√°rio
    const timer = setTimeout(() => {
      setShouldLoad(true);
    }, 200);
    
    return () => clearTimeout(timer);
  }, []);

  useEffect(() => {
    // Auto play apenas quando vis√≠vel
    if (videoRef.current && shouldLoad) {
      videoRef.current.play().catch(console.error);
    }
  }, [shouldLoad]);

  if (!shouldLoad) {
    return (
      <div className={`w-full aspect-video bg-gradient-to-br from-gray-700 to-gray-900 rounded-3xl flex items-center justify-center ${className}`}>
        <div className="text-white text-lg">Carregando v√≠deo...</div>
      </div>
    );
  }

  return (
    <video
      ref={(el) => {
        videoRef.current = el;
        if (refProp) refProp.current = el;
      }}
      src={src}
      autoPlay={autoPlay}
      muted={muted}
      loop={loop}
      playsInline={playsInline}
      preload="metadata"
      className={className}
      {...props}
    />
  );
};

// 5. PLACEHOLDER PARA INSTAGRAM
const InstagramPlaceholder = ({ usuario, avatar, text, time, likes, replies, ...props }) => {
  const [loaded, setLoaded] = useState(false);

  return (
    <div className="flex flex-col gap-3 mb-6 animate-fade-in group">
      <div className="flex gap-3">
        <OptimizedImage
          src={avatar}
          alt={usuario}
          className="w-10 h-10 rounded-full object-cover border border-slate-100 shadow-sm"
          onLoad={() => setLoaded(true)}
        />
        <div className="flex-1">
          <div className="flex items-start justify-between">
            <div className="flex items-center">
              <OptimizedImage
                src={avatar}
                alt={usuario}
                className="w-8 h-8 rounded-full object-cover border border-slate-100"
              />
            </div>
            <div className="flex items-center ml-4 mt-1">
              <Heart size={14} className="text-slate-400 cursor-pointer hover:text-red-500 transition-colors" />
              {likes > 0 && (
                <span className="text-[10px] text-slate-400 mt-0.5 ml-1">
                  {likes}
                </span>
              )}
            </div>
          </div>
          <div className="mt-1">
            <p className="text-[13px] md:text-sm leading-snu text-slate-700">
              <span className="font-bold mr-2 text-slate-900 cursor-pointer hover:opacity-70 transition-opacity">
                {usuario}
              </span>
              {text}
            </p>
            <div className="flex items-center gap-4 mt-1 text-[11px] font-semibold text-slate-400 uppercase tracking-tight">
              <span>{time}</span>
              <button className="hover:text-slate-600 transition-colors">
                Responder
              </button>
            </div>
          </div>
        </div>
      </div>
      
      {replies && replies.map((reply, idx) => (
        <div key={idx} className="flex gap-3 mb-12 mt-2">
          <OptimizedImage
            src={reply.avatar}
            alt={reply.usuario}
            className="w-8 h-8 rounded-full object-cover border border-slate-100"
          />
          <div className="flex-1">
            <div className="flex items-start justify-between">
              <div className="flex items-center">
                <p className="text-[13px] md:text-sm leading-snu text-slate-700">
                  <span className="font-bold mr-2 text-slate-900 cursor-pointer hover:opacity-70 transition-opacity">
                    {reply.usuario}
                  </span>
                  {reply.text}
                </p>
              </div>
              <Heart size={12} className="text-slate-400 cursor-pointer hover:text-red-500 transition-colors mt-2 ml-2" />
            </div>
            <div className="flex items-center gap-4 mt-1 text-[11px] font-semibold text-slate-400 uppercase tracking-tight">
              <span>{reply.time}</span>
              <button className="hover:text-slate-600 transition-colors">
                Responder
              </button>
            </div>
          </div>
        </div>
      ))}
    </div>
  );
};

// 6. BOT√ÉO OTIMIZADO COM HOVER EFFECTS
const OptimizedButton = ({ children, variant = 'primary', fullWidth = false, size = 'md', className = '', ...props }) => {
  const baseStyles = "relative font-bold rounded-2xl transition-all active:translate-y-1 active:border-b-0 focus:outline-none select-none flex items-center justify-center gap-2";
  
  const variants = {
    primary: "bg-brand-yellow text-amber-900 border-4 border-brand-yellowDark hover:brightness-105",
    secondary: "bg-brand-blue text-white border-4 border-brand-blueDark hover:brightness-105",
    accent: "bg-brand-green text-white border-4 border-brand-greenDark hover:brightness-105",
    danger: "bg-brand-red text-white border-4 border-brand-redDark hover:brightness-105",
  };
  
  const sizes = {
    sm: "py-2 px-4 text-sm border-2",
    md: "py-3 px-6 text-lg",
    lg: "py-4 px-8 text-xl md:text-2xl",
  };
  
  return (
    <button
      className={`
        ${baseStyles}
        ${variants[variant]}
        ${sizes[size]}
        ${fullWidth ? 'w-full' : ''}
        ${className}
      `}
      {...props}
    >
      {children}
    </button>
  );
};

// 7. USO NO SEU COMPONENTE PRINCIPAL
const OptimizedApp = () => {
  const [isMenuOpen, setIsMenuOpen] = useState(false);
  const [currentDate, setCurrentDate] = useState("");
  const [vslMuted, setVslMuted] = useState(true);
  const [testimonialMuted, setTestimonialMuted] = useState(true);
  const vslRef = useRef(null);
  const testimonialRef = useRef(null);

  // Preload de imagens cr√≠ticas
  useEffect(() => {
    const criticalImages = [
      'https://i.imgurl.com/bl6Amwcp.png',
      'https://i.imgurl.com/MZrBRnD.png'
    ];
    
    criticalImages.forEach(src => {
      const img = new Image();
      img.src = src;
    });
  }, []);

  // ... resto do seu c√≥digo original ...

  return (
    <div className="min-h-screen bg-slate-50 text-slate-800 font-sans selection:bg-brand-yellow selection:text-brand-yellowDark">
      <header className="absolute top-0 left-0 right-0 z-50 h-[72px]">
        <Container className="h-full flex items-center justify-between relative">
          <div className="absolute left-1/2 top-0 -translate-x-1/2 z-20 pt-1">
            <OptimizedLogo /> {/* ‚Üê Substitui sua <img> */}
          </div>
          
          <div className="ml-auto flex items-center gap-6 relative z-10">
            <div className="hidden md:flex gap-6 items-center bg-white/50 px-6 py-2 rounded-full backdrop-blur-sm shadow-sm border border-white/50">
              <button onClick={() => scrollToSection('como-funciona')} className="text-brand-blueDark font-bold hover:text-brand-blue">
                Como Funciona
              </button>
              <button onClick={() => scrollToSection('beneficios')} className="text-brand-blueDark font-bold hover:text-brand-blue">
                Benef√≠cios
              </button>
              <button onClick={() => scrollToSection('planos')} className="text-brand-blueDark font-bold hover:text-brand-blue">
                Planos
              </button>
              <OptimizedButton 
                size="sm" 
                onClick={() => scrollToSection('planos')}
              >
                Come√ßar Agora
              </OptimizedButton>
            </div>
            
            <button 
              className="md:hidden text-brand-blueDark p-2 bg-white/50 rounded-xl"
              onClick={() => setIsMenuOpen(!isMenuOpen)}
            >
              {isMenuOpen ? <X size={28} /> : <Menu size={28} />}
            </button>
          </div>
        </Container>
        
        {isMenuOpen && (
          <div className="fixed inset-0 -z-40 bg-white pt-32 px-6 md:hidden flex flex-col gap-6 items-center animate-fade-in">
            <OptimizedButton fullWidth onClick={() => scrollToSection('como-funciona')}>
              Como Funciona
            </OptimizedButton>
            <OptimizedButton fullWidth onClick={() => scrollToSection('beneficios')}>
              Benef√≠cios
            </OptimizedButton>
            <OptimizedButton fullWidth onClick={() => scrollToSection('planos')}>
              Planos
            </OptimizedButton>
            <OptimizedButton fullWidth onClick={() => scrollToSection('planos')}>
              Come√ßar Agora
            </OptimizedButton>
          </div>
        )}
      </header>
      
      {/* V√≠deo otimizado */}
      <OptimizedVideo
        ref={vslRef}
        src="https://video.wixstatic.com/video/512b9f_5bf6d2c9c08540a8b3d3cbe4ec4d4661b/1080p/mp4/file.mp4"
        autoPlay={true}
        muted={vslMuted}
        loop={true}
        playsInline={true}
        className="w-full h-full object-cover"
      />
      
      {/* Bot√£o de √°udio otimizado */}
      <OptimizedButton
        onClick={toggleVslAudio}
        className="absolute bottom-6 left-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-md text-brand-blueDark px-6 py-3 rounded-full font-bold shadow-xl z-20 flex items-center gap-2 hover:scale-105 transition-all border-2 border-brand-blue/20"
      >
        {vslMuted ? (
          <Fragment>
            <VolumeX size={20} />
            <span>LIGAR SOM</span>
          </Fragment>
        ) : (
          <Fragment>
            <Volume2 size={20} />
            <span>DESLIGAR SOM</span>
          </Fragment>
        )}
      </OptimizedButton>
    </div>
  );
};

export default OptimizedApp;
